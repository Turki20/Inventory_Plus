{% extends "main/base.html" %}

{% load static %}

{% block title %}
Add Product
{% endblock title %}

{% block content %}


<div class="row p-4">
    <div class="col">
        <div class="card card_style p-4" style="flex-direction: row; gap: 40px; border: none !important; color: white;">
            <div class="larg_icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="" fill="currentColor"
                    class="bi bi-box-seam-fill" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                        d="M15.528 2.973a.75.75 0 0 1 .472.696v8.662a.75.75 0 0 1-.472.696l-7.25 2.9a.75.75 0 0 1-.557 0l-7.25-2.9A.75.75 0 0 1 0 12.331V3.669a.75.75 0 0 1 .471-.696L7.443.184l.01-.003.268-.108a.75.75 0 0 1 .558 0l.269.108.01.003zM10.404 2 4.25 4.461 1.846 3.5 1 3.839v.4l6.5 2.6v7.922l.5.2.5-.2V6.84l6.5-2.6v-.4l-.846-.339L8 5.961 5.596 5l6.154-2.461z" />
                </svg>
            </div>
            <div>
                <h3>Update Product</h3>
            </div>
        </div>
    </div>
</div>

<div class="row p-4">

    {% if messages %}
    {% for message in messages %}

    <div class="alert {{message.tags}} d-flex align-items-center" role="alert" style="position: relative;">
        {% if message.tsgs == 'success' %}
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle"
            viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
            <path
                d="m10.97 4.97-.02.022-3.473 4.425-2.093-2.094a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05" />
        </svg>
        {% else %}
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
            class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
            <path
                d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2" />
        </svg>
        {% endif %}
        <div style="padding: 0px 10px;">
            {{message}}
        </div>
        <span class="x_icons" onclick="remove_parent(this)">âœ•</span>
    </div>
    {% endfor %}
    {% endif %}
</div>

<div class="row p-4">
    <div class="col p-4">
        <form action="{% url 'product:update_product_view' product.id %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="number" value="{{product.id}}" hidden name="id">
            <div class="mb-3">
                <label for="name" class="form-label">Product Name</label>
                <input type="text" class="form-control" id="name" name="name" placeholder="e.g. Smartphone" required value="{{product.name}}">
            </div>

            <div class="mb-3">
                <label for="sku" class="form-label">Product SKU</label>
                <input type="text" class="form-control" id="sku" name="sku" placeholder="e.g. SKU123456" required  value="{{product.sku}}">
            </div>

            <div class="mb-3">
                <label for="image" class="form-label">Product Image</label>
                <input type="file" class="form-control" id="image" name="image" accept="image/*">
                <img src="{{product.image.url}}" alt="" class="mt-2 w-25" />
            </div>

            <div class="mb-3">
                <label for="category" class="form-label">Category</label>
                <select class="form-select" id="category" name="category" required>
                    <option disabled>Select a category</option>
                    {% for category in all_categories %}
                    <option value="{{category.id}}" {% if category == product.category %}selected{% endif %}>{{category}}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="mb-3">
                <label for="supplier" class="form-label">Supplier</label>
                <select class="form-select" id="supplier" name="supplier">
                    <option selected disabled>Select a supplier</option>
                    <option value="1">Supplier 1</option>
                    <option value="2">Supplier 2</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea class="form-control" id="description" name="description" rows="3"
                    placeholder="Short description of the product..." >{{product.description}}</textarea>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="quantity" class="form-label">Quantity in Stock</label>
                    <input type="number" class="form-control" id="quantity" name="quantity_in_stock"  value="{{product.quantity_in_stock}}" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="min_quantity" class="form-label">Minimum Alert Quantity</label>
                    <input type="number" class="form-control" id="min_quantity" name="min_quantity_alert" value="{{product.min_quantity_alert}}">
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="cost_price" class="form-label">Cost Price</label>
                    <input type="number" step="0.01" class="form-control" id="cost_price" name="cost_price" value="{{product.cost_price}}" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="selling_price" class="form-label">Selling Price</label>
                    <input type="number" step="0.01" class="form-control" id="selling_price" name="selling_price" value="{{product.selling_price}}" required>
                </div>
            </div>

            <button type="submit" class="btn btn-primary w-100 btn_style">Update Product</button>
        </form>
    </div>
</div>
{% endblock content %}